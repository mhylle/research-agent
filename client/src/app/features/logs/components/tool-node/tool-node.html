<div class="tool-node">
  <div class="tool-node__header" (click)="toggleExpand()">
    <div class="tool-node__info">
      <span class="tool-node__icon">{{ node.icon }}</span>
      <span class="tool-node__name">{{ node.name }}</span>
      <span class="status-badge" [class]="'status-' + node.status" *ngIf="node.status">
        {{ node.status }}
      </span>
    </div>
    <div class="tool-node__meta">
      <span class="tool-node__duration">{{ formatDuration(node.duration) }}</span>
      <span class="tool-node__expand-icon" [class.tool-node__expand-icon--expanded]="node.isExpanded">
        ‚ñ∂
      </span>
    </div>
  </div>

  <div class="tool-node__content" *ngIf="node.isExpanded">
    <div class="error-section" *ngIf="node.error">
      <h4 class="error-title">‚ùå Error</h4>
      <div class="error-message">{{ node.error.message }}</div>
      <div class="error-details" *ngIf="node.error.details">
        <app-json-viewer title="Error Details" [data]="node.error.details" />
      </div>
    </div>

    <div class="metadata-section" *ngIf="node.metadata">
      <div class="metadata-badge" *ngIf="node.metadata.isAutoAdded">ü§ñ Auto-Added</div>
      <div class="metadata-badge abandoned" *ngIf="node.metadata.isAbandoned">‚ö†Ô∏è Abandoned</div>
      <div class="metadata-badge" *ngIf="node.metadata.recoveryReason">
        üîß Recovery: {{ node.metadata.recoveryReason }}
      </div>
    </div>

    <app-json-viewer title="Input" [data]="node.input" />
    <app-json-viewer title="Output" [data]="node.output" />
  </div>
</div>
