<div class="logs-page">
  <aside class="logs-page__sidebar">
    <app-logs-list
      [sessions]="logsService.filteredSessions()"
      [selectedLogId]="logsService.selectedLogId()"
      [isLoading]="logsService.isLoadingSessions()"
      (sessionSelected)="onSessionSelected($event)"
      (searchChanged)="onSearchChanged($event)"
    />
  </aside>

  <main class="logs-page__content">
    <div class="view-tabs" *ngIf="logsService.selectedSession()">
      <button
        class="tab-button"
        [class.active]="activeView === 'timeline'"
        (click)="activeView = 'timeline'"
      >
        ðŸ“‹ Timeline View
      </button>
      <button
        class="tab-button"
        [class.active]="activeView === 'graph'"
        (click)="activeView = 'graph'"
      >
        ðŸ“Š Graph View
      </button>
    </div>

    <div class="view-content" *ngIf="logsService.selectedSession()">
      <app-log-timeline
        *ngIf="activeView === 'timeline'"
        [session]="logsService.selectedSession()!"
        [timelineNodes]="logsService.timelineNodes()"
        [isLoading]="logsService.isLoadingDetails()"
        [result]="logsService.logDetail()?.result"
      />

      <app-timeline-graph
        *ngIf="activeView === 'graph' && logsService.graphData()"
        [graphData]="logsService.graphData()!"
        [width]="1400"
        [height]="700"
      />

      <div class="loading-graph" *ngIf="activeView === 'graph' && logsService.isLoadingGraph()">
        <div class="spinner"></div>
        <p>Loading graph visualization...</p>
      </div>
    </div>

    <div class="logs-page__empty" *ngIf="!logsService.selectedSession() && !logsService.isLoadingSessions()">
      <div class="empty-state">
        <h3>Select a Research Session</h3>
        <p>Choose a session from the list to view its timeline and debug the research pipeline</p>
      </div>
    </div>
  </main>
</div>
